<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        table, th, td { border: 1px solid #ccc; }
        th, td { padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .logout { margin-top: 20px; }
        button { padding: 6px 12px; cursor: pointer; }
    </style>
</head>
<body>

<h1>Dashboard</h1>

<div>
    <p>Welcome, <span th:text="${#authentication.name}">User</span>!</p>
    <p>Your role: <span th:text="${#authentication.authorities}">ROLE_USER</span></p>
</div>

<h2>Available Coffees</h2>
<table>
    <thead>
    <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Origin</th>
        <th>Price</th>
        <th>Available</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="coffee : ${coffees}">
        <td th:text="${coffee.name}">Coffee Name</td>
        <td th:text="${coffee.type}">Type</td>
        <td th:text="${coffee.origin}">Origin</td>
        <td th:text="${coffee.price}">0.0</td>
        <td th:text="${coffee.available}">true</td>
    </tr>
    </tbody>
</table>

<h2>Orders</h2>
<table>
    <thead>
    <tr>
        <th>Order ID</th>
        <th>Coffee</th>
        <th>User</th>
        <th>Status</th>
        <th>Cup Size</th>
        <th>Sugar Level</th>
        <th>Created At</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="order : ${orders}">
        <td th:text="${order.id}">1</td>
        <td th:text="${order.coffee.name}">Coffee</td>
        <td th:text="${order.user.username}">User</td>
        <td th:text="${order.status}">PLACED</td>
        <td th:text="${order.cupSize}">MEDIUM</td>
        <td th:text="${order.sugarLevel}">1</td>
        <td th:text="${#dates.format(order.createdAt, 'yyyy-MM-dd HH:mm')}">2025-12-12 12:00</td>
    </tr>
    </tbody>
</table>

<h2>Machine Status</h2>
<table>
    <thead>
    <tr>
        <th>Cups Made</th>
        <th>Water (ml)</th>
        <th>Maintenance Required</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="status : ${machineStatus}">
        <td th:text="${status.cupsMade}">0</td>
        <td th:text="${status.waterMl}">0</td>
        <td th:text="${status.maintenanceRequired}">false</td>
    </tr>
    </tbody>
</table>

<div class="logout">
    <form th:action="@{/logout}" method="post">
        <button type="submit">Logout</button>
    </form>
</div>

</body>
</html>
